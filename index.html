<!DOCTYPE html>

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Train Schedule</title>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap CDN-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!-- Firebase Reference -->
  <script src="https://www.gstatic.com/firebasejs/3.7.1/firebase.js"></script>

  <!-- Moment.js Reference -->
 	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1 class="text-center">Train Schedule</h1>
            <h3 class="text-center">Locomotive Lane</h3>
        </div>
        <div>
            <div class="row">
                <div class="col-xs-12 col-sm-12 col=md-12 col-lg-12">
                    <!-- Current Train -->
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title"><strong>Current Train</strong></h3>
                        </div>
                        <div class="panel-body">
                            <table class="table table-hover" id="trainSchedule">
                                <thead>
                                    <tr>
                                        <th>Train Name</th>
                                        <th>Train Line</th>
                                        <th>Destination</th>
                                        <th>Frequency</th>
                                        <th>Next Arrival</th>
                                        <th>Minutes Away</th>
                                    </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Add New Trains -->
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title"><strong>Add a New Train</strong></h3>
                        </div>
                        <div class="panel-body">
                            <form>
                                <div class="form-group">
                                    <label for="trainName">Train Name</label>
                                    <input class="form-control" id="trainName">
                                </div>
                                <div class="form-group">
                                    <label for="trainLine">Train Line</label>
                                    <input class="form-control" id="trainLine">
                                </div>
                                <div class="form-group">
                                    <label for="trainDestination">Destination</label>
                                    <input class="form-control" id="trainDestination">
                                </div>
                                <div class="form-group">
                                    <label for="trainFrequency">Frequency</label>
                                    <input class="form-control" id="trainFrequency">
                                </div>
                                <div class="form-group">
                                    <label for="nextArrivalTime">Next Arrival</label>
                                    <input class="form-control" id="nextArrivalTime">
                                </div>
                                <div class="form-group">
                                    <label for="minutesAway">Minutes Away</label>
                                    <input class="form-control" id="minutesAway">
                                </div>
                                <button type="submit" class="btn btn-primary" id="addTrain">Add</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Javascript -->
    <!--<script src="assets/js/app.js"></script>-->
    <script>
         // Initialize Firebase
    var config = {
        apiKey: "AIzaSyCGqVYlpW8ZARRw0n0fV0VN31yxVGcQw6w",
        authDomain: "trainschedule-c54e8.firebaseapp.com",
        databaseURL: "https://trainschedule-c54e8.firebaseio.com",
        projectId: "trainschedule-c54e8",
        storageBucket: "trainschedule-c54e8.appspot.com",
        messagingSenderId: "325819356735"
    };
    firebase.initializeApp(config);
    
    var db = firebase.database();

    // Event handler for `adding` a new Train Schedule
    $("#addTrain").on("click", () => {
        event.preventDefault();
        //gather User data from inputs
        let trainName = $("#trainName").val().trim();
        let trainLine = $("#trainLine").val().trim();
        let destination = $("#trainDestination").val().trim();
        let nextArrivalTime = $("#nextArrivalTime").val().trim();
        let minutesAway = $("#minutesAway").val().trim();
        let frequency = $("#trainFrequency").val().trim();

        console.log(trainName + ", " + trainLine + ", " + ", " + destination + ", " 
        + nextArrivalTime + ", " + minutesAway);

        db.ref().push({
            name: trainName,
            line: trainLine,
            detination: destination,
            nextArrivalTime: nextArrivalTime,
            frequency: frequency
        });
    }); 
    </script>
</body>
</html>